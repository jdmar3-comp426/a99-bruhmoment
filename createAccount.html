<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="node_modules/bulma/css/bulma.css">
        <link rel="stylesheet" href="styles.css">
        <link href="https://fonts.googleapis.com/css?family=Shrikhand&display=swap" rel="stylesheet">
        <title>Create Account</title>
    </head>
    <body>
        <div class="container">
            <header>
                Hangman!
                <div class = "subtitle">The legend of Zim</div>
                <nav id="nav_menu">
                    <div class="wrapper">
                        <ul>
                        <li><a href="index.html">Login</a></li>
                        <li><a href="gamepage.html">Game</a></li>
                        <li><a href="leaderboard.html">Leaderboard</a></li>
                        </ul>
                    </div>
                </nav>
            </header>
            <main>
                <h1>
                    Welcome!
                </h1>
                <h3>
                    Please Create an Account to Play
                </h3>
                <div class="login-page">
                    <div class="form">
                      <form class="login-form">
                        <input type="text" id="user" placeholder="Username"/>
                        <input type="password" id="pass" placeholder="Password"/>
                        <input type="password" id="cPass" placeholder="Confirm Password"/>
                        <button onclick= "create_user(document.getElementById('user').value, document.getElementById('pass').value, 'email')" >create</button>
                        <p class="message">Already have an account? <a href="index.html">Login here</a></p>
                      </form>
                    </div>
                  </div>
            </main>
        </div>
    </body>
    <script>
        var create_user = (username, password, email)=>{
            // instantiate a headers object
            var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify({"username":username, "password":password, "email":email});
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch("https://bjpskapus9.execute-api.us-east-1.amazonaws.com/dev/app/user/new", requestOptions)
            .then(response => response.text())
            .then(result => {
                // if false prompt user to try again with a new username
                // if true store username as global variable for future use 
            }).catch(error => console.log('error', error));
        }
    </script>
</html>